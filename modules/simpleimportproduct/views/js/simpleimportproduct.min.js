$(document).ready(function(){MpmImportCategoryLinking.init();$(document).on("click live",MpmImportCategoryLinking.add_btn,function(a){a.preventDefault();MpmImportCategoryLinking.addNew()});$(document).on("click live",MpmImportCategoryLinking.delete_btn,function(a){a.preventDefault();MpmImportCategoryLinking.remove($(this))});$(document).on("click",MpmImportCategoryLinking.toggle_switch,function(){MpmImportCategoryLinking.toggleVisibility()});if($("#customization_one_column_on").is(":checked")){$(".more_customization").hide();$(".panel.customization:not(.first_child)").hide()}else{$(".more_customization").show();$(".panel.customization:not(.first_child)").show()}$(document).on("click change","input[name='customization_one_column']",function(){if($("#customization_one_column_on").is(":checked")){$(".more_customization").hide();$(".panel.customization:not(.first_child)").hide()}else{$(".more_customization").show();$(".panel.customization:not(.first_child)").show()}});saveConfig();$(document).on("click",".list-group-item.import_tab",function(){var a=$(this).attr("data-tab");if(a=="prices"){changeDiscount()}});if($("input[name='import_attachments_from_single_column']:checked").val()==1){$(".btn.more_attachments").hide()}else{$(".btn.more_attachments").show()}$(document).on("live change","input[name='import_attachments_from_single_column']",function(){if($("input[name='import_attachments_from_single_column']:checked").val()==1){$(".btn.more_attachments, .additional-attachments").hide()}else{$(".btn.more_attachments").show();$("#fieldset_14_14, .additional-attachments").show()}});$(document).on("click",".simpleimportproduct .more_settings",function(){if($(this).hasClass("active")){$(this).removeClass("active");$(".simpleimportproduct .use_headers").fadeOut();$(".simpleimportproduct .disable_hooks").fadeOut();$(".simpleimportproduct .search_index").fadeOut();$(".simpleimportproduct .products_range").fadeOut();$(".simpleimportproduct .from_range").fadeOut();$(".simpleimportproduct .to_range").fadeOut();$(".simpleimportproduct .iteration").fadeOut()}else{$(this).addClass("active");$(".simpleimportproduct .use_headers").fadeIn();$(".simpleimportproduct .disable_hooks").fadeIn();$(".simpleimportproduct .search_index").fadeIn();$(".simpleimportproduct .products_range").fadeIn();if($(".simpleimportproduct .products_range input:checked").val()=="range"){$(".simpleimportproduct .from_range").fadeIn();$(".simpleimportproduct .to_range").fadeIn()}$(".simpleimportproduct .iteration").fadeIn()}});$(document).on("change",".simpleimportproduct .products_range input",function(){if($(this).filter(":checked").val()=="all"){$(".simpleimportproduct .from_range").fadeOut();$(".simpleimportproduct .to_range").fadeOut()}else{$(".simpleimportproduct .from_range").fadeIn();$(".simpleimportproduct .to_range").fadeIn()}});$(document).on("change",".simpleimportproduct .field_settings_block select[name=condition]",function(){if($(this).val()=="empty"||$(this).val()=="any"||$(this).val()=="not_empty"){$(this).parents(".field_settings_block").find(".setting_condition_value").hide();if($(this).val()=="any"){$(this).parents(".field_settings_block").find(".setting_field").hide()}else{$(this).parents(".field_settings_block").find(".setting_field").show()}}else{$(this).parents(".field_settings_block").find(".setting_condition_value").show();$(this).parents(".field_settings_block").find(".setting_field").show()}});$.each($(".simpleimportproduct #fieldset_0 .field_settings_block"),function(b){var a=$(this).find(".setting_condition select").val();if(a=="empty"||a=="any"||a=="not_empty"){$(this).find(".setting_condition_value").hide()}if(a=="any"){$(this).find(".setting_field").hide()}});$(document).on("change",".simpleimportproduct .price_settings_block select[name=condition]",function(){if($(this).val()=="zero"||$(this).val()=="any"){$(this).parents(".price_settings_block").find(".setting_condition_value").hide()}else{$(this).parents(".price_settings_block").find(".setting_condition_value").show()}});$.each($(".simpleimportproduct #fieldset_0 .price_settings_block"),function(b){var a=$(this).find(".setting_condition select").val();if(a=="zero"||a=="any"){$(this).find(".setting_condition_value").hide()}});$(document).on("change",".simpleimportproduct .quantity_settings_block select[name=condition]",function(){if($(this).val()=="zero"||$(this).val()=="any"){$(this).parents(".quantity_settings_block").find(".setting_condition_value").hide()}else{$(this).parents(".quantity_settings_block").find(".setting_condition_value").show();$(this).parents(".quantity_settings_block").find(".setting_quantity_formula").show()}});$.each($(".simpleimportproduct #fieldset_0 .quantity_settings_block"),function(b){var a=$(this).find(".setting_condition select").val();if(a=="zero"||a=="any"){$(this).find(".setting_condition_value").hide()}});$(document).on("click",".simpleimportproduct .show_more",function(){if($(this).hasClass("active")){$(this).removeClass("active");$(this).html(import_show_more);$(".simpleimportproduct #fieldset_1_1").attr("style","");$(".simpleimportproduct #fieldset_1_1").removeClass("show_all")}else{$(this).addClass("active");$(this).html(import_hide);$(".simpleimportproduct #fieldset_1_1").addClass("show_all");setTimeout(function(){$(".simpleimportproduct #fieldset_1_1").css("height","100%")},500)}});$(".panel-heading-gomakoil .step_2, .next_button_import").click(function(){if($(".simpleimportproduct select.feed_source").val()=="file_url"||$(".simpleimportproduct select.feed_source").val()=="ftp"||$(".simpleimportproduct select.feed_source").val()=="sftp"){stepTwoImportFromUrl()}else{stepTwoImport()}});$(".content_import_page #fieldset_12_12").addClass("suppliers");$(".content_import_page #fieldset_4_4").addClass("prices");$(".content_import_page #fieldset_8_8").addClass("associations");$(".content_import_page #fieldset_3_3").addClass("combinations");$(".content_import_page #fieldset_7_7").addClass("features");$(".content_import_page #fieldset_7_7").addClass("first_child");$(".content_import_page #fieldset_6_6").addClass("images");$(".content_import_page #fieldset_6_6").addClass("first_child");$(".content_import_page #fieldset_11_11").addClass("pack");$(".content_import_page #fieldset_13_13").addClass("customization");$(".content_import_page #fieldset_13_13").addClass("first_child");$(".content_import_page #fieldset_14_14").addClass("attachments");$(".content_import_page #fieldset_14_14").addClass("first_child");$(".content_import_page .import_tabs .import_tab").click(function(){$(".content_import_page .import_tabs .import_tab").removeClass("active");$(this).addClass("active");$(".content_import_page #fieldset_0 .form-group").hide();$(".content_import_page #fieldset_3_3").hide();$(".content_import_page #fieldset_4_4").hide();$(".content_import_page #fieldset_7_7").hide();$(".content_import_page #fieldset_6_6").hide();$(".content_import_page #fieldset_8_8").hide();$(".content_import_page #fieldset_10_10").hide();$(".content_import_page #fieldset_11_11").hide();$(".content_import_page #fieldset_12_12").hide();$(".content_import_page #fieldset_13_13").hide();$(".content_import_page #fieldset_14_14").hide();hasAccessories();hasDiscount();if($(this).attr("data-tab")=="combinations"||$(this).attr("data-tab")=="features"||$(this).attr("data-tab")=="images"||$(this).attr("data-tab")=="pack"||$(this).attr("data-tab")=="customization"||$(this).attr("data-tab")=="attachments"||$(this).attr("data-tab")=="suppliers"){$(".content_import_page #fieldset_0").hide()}else{$(".content_import_page #fieldset_0").show()}$(".content_import_page #fieldset_0 ."+$(this).attr("data-tab")).show();$(".content_import_page .panel."+$(this).attr("data-tab")).show();if(!$(".content_import_page #fieldset_0 .form-group.product_id").hasClass("active")){$(".content_import_page #fieldset_0 .form-group.product_id").hide()}if($("select[name=tax_method]").val()=="tax_rate_method"){$(".simpleimportproduct .tax_rule_method").hide();$(".simpleimportproduct .existing_tax_method").hide()}else{if($("select[name=tax_method]").val()=="tax_rules_method"){$(".simpleimportproduct .existing_tax_method").hide();$(".simpleimportproduct .tax_rate_method").hide()}else{$(".simpleimportproduct .tax_rate_method").hide();$(".simpleimportproduct .tax_rule_method").hide()}}if($("select[name=category_method]").val()=="category_ids_method"){$(".simpleimportproduct .category_name_method").hide();$(".simpleimportproduct .category_tree_method").hide()}else{if($("select[name=category_method]").val()=="category_tree_method"){$(".simpleimportproduct .category_id_method").hide();$(".simpleimportproduct .more_subcategory").hide()}else{$(".simpleimportproduct .category_tree_method").hide();$(".simpleimportproduct .category_id_method").hide()}}if($("select[name=supplier_method]").val()=="supplier_name_method"){$(".simpleimportproduct .supplier_id_method").hide();$(".simpleimportproduct .existing_supplier_method").hide()}else{if($("select[name=supplier_method]").val()=="supplier_ids_method"){$(".simpleimportproduct .existing_supplier_method").hide();$(".simpleimportproduct .supplier_name_method").hide()}else{$(".simpleimportproduct .supplier_name_method").hide();$(".simpleimportproduct .supplier_id_method").hide()}}if($("select[name=manufacturer_method]").val()=="manufacturer_name_method"){$(".simpleimportproduct .manufacturer_id_method").hide();$(".simpleimportproduct .existing_manufacturer_method").hide()}else{if($("select[name=manufacturer_method]").val()=="manufacturer_ids_method"){$(".simpleimportproduct .manufacturer_name_method").hide();$(".simpleimportproduct .existing_manufacturer_method").hide()}else{$(".simpleimportproduct .manufacturer_id_method").hide();$(".simpleimportproduct .manufacturer_name_method").hide()}}$.each($(".panel.combinations"),function(a){var b=$(this);var c=b.find("#supplier_method_combination").val();if(c=="supplier_name_method"){b.find(".supplier_id_combination").hide();b.find(".existing_supplier_combination").hide()}else{if(c=="supplier_ids_method"){b.find(".existing_supplier_combination").hide();b.find(".supplier_name_combination").hide()}else{b.find(".supplier_name_combination").hide();b.find(".supplier_id_combination").hide()}}})});$(document).on("change",".simpleimportproduct select[name=supplier_method_combination]",function(){if($(this).val()=="supplier_name_method"){$(this).parents("#fieldset_3_3").find(".supplier_id_combination").hide();$(this).parents("#fieldset_3_3").find(".existing_supplier_combination").hide();$(this).parents("#fieldset_3_3").find(".supplier_name_combination").show()}else{if($(this).val()=="supplier_ids_method"){$(this).parents("#fieldset_3_3").find(".supplier_id_combination").show();$(this).parents("#fieldset_3_3").find(".existing_supplier_combination").hide();$(this).parents("#fieldset_3_3").find(".supplier_name_combination").hide()}else{$(this).parents("#fieldset_3_3").find(".supplier_id_combination").hide();$(this).parents("#fieldset_3_3").find(".existing_supplier_combination").show();$(this).parents("#fieldset_3_3").find(".supplier_name_combination").hide()}}});$(document).on("change",".simpleimportproduct .format_file",function(){var a=$(".format_file").val();if(a=="csv"){$(".step_1 .csv_delimiter").show()}else{$(".step_1 .csv_delimiter").hide()}});if($(".format_file").val()=="csv"){$(".step_1 .csv_delimiter").show()}$(document).on("change",".simpleimportproduct select[name=category_method]",function(){if($(this).val()=="category_ids_method"){$(".simpleimportproduct .category_id_method").show();$(".simpleimportproduct .category_name_method").hide();$(".more_subcategory").show();$(".category_tree_method").hide()}else{$(".simpleimportproduct .category_id_method").hide();$(".simpleimportproduct .category_name_method").show();$(".more_subcategory").show();$(".category_tree_method").hide();if($(this).val()=="category_tree_method"){$(".more_subcategory").hide();$(".category_tree_method").show();$.each($(".one_subcategory"),function(a){if(!$(this).hasClass("one_subcategory_1")){$(this).remove()}})}}});$(document).on("change",".simpleimportproduct select[name=tax_method]",function(){if($(this).val()=="tax_rate_method"){$(".simpleimportproduct .tax_rule_method").hide();$(".simpleimportproduct .existing_tax_method").hide();$(".simpleimportproduct .tax_rate_method").show()}else{if($(this).val()=="existing_tax_method"){$(".simpleimportproduct .tax_rule_method").hide();$(".simpleimportproduct .existing_tax_method").show();$(".simpleimportproduct .tax_rate_method").hide()}else{$(".simpleimportproduct .tax_rule_method").show();$(".simpleimportproduct .existing_tax_method").hide();$(".simpleimportproduct .tax_rate_method").hide()}}});$(document).on("change",".simpleimportproduct select[name=supplier_method]",function(){if($(this).val()=="supplier_name_method"){$(".simpleimportproduct .supplier_id_method").hide();$(".simpleimportproduct .existing_supplier_method").hide();$(".simpleimportproduct .supplier_name_method").show()}else{if($(this).val()=="supplier_ids_method"){$(".simpleimportproduct .supplier_id_method").show();$(".simpleimportproduct .existing_supplier_method").hide();$(".simpleimportproduct .supplier_name_method").hide()}else{$(".simpleimportproduct .supplier_id_method").hide();$(".simpleimportproduct .existing_supplier_method").show();$(".simpleimportproduct .supplier_name_method").hide()}}});$(document).on("change",".simpleimportproduct select[name=manufacturer_method]",function(){if($(this).val()=="manufacturer_name_method"){$(".simpleimportproduct .manufacturer_id_method").hide();$(".simpleimportproduct .existing_manufacturer_method").hide();$(".simpleimportproduct .manufacturer_name_method").show()}else{if($(this).val()=="manufacturer_ids_method"){$(".simpleimportproduct .manufacturer_id_method").show();$(".simpleimportproduct .manufacturer_name_method").hide();$(".simpleimportproduct .existing_manufacturer_method").hide()}else{$(".simpleimportproduct .manufacturer_id_method").hide();$(".simpleimportproduct .manufacturer_name_method").hide();$(".simpleimportproduct .existing_manufacturer_method").show()}}});if($(".simpleimportproduct .parser_import_val").val()=="product_id"){$(".simpleimportproduct .force_ids").show()}if($(".simpleimportproduct select.feed_source").val()=="file_url"){$(".simpleimportproduct .file_import_select").hide();$(".simpleimportproduct .file_import_ftp").hide();$(".simpleimportproduct .file_import_url").show()}if($(".simpleimportproduct select.parser_import_val").val()=="reference"||$(".simpleimportproduct select.parser_import_val").val()=="ean13"||$(".simpleimportproduct select.parser_import_val").val()=="upc"||$(".simpleimportproduct select.parser_import_val").val()=="isbn"){$(".simpleimportproduct .combination_identification_class").show()}$(document).on("change",".simpleimportproduct select.parser_import_val",function(){if($(this).val()=="reference"||$(this).val()=="ean13"||$(this).val()=="upc"||$(this).val()=="isbn"){$(".simpleimportproduct .combination_identification_class").show()}else{$(".simpleimportproduct .combination_identification_class").hide()}});if($(".simpleimportproduct select.feed_source").val()=="ftp"){$(".simpleimportproduct .file_import_select").hide();$(".simpleimportproduct .file_import_ftp").show();$(".simpleimportproduct .file_import_url").hide()}$(document).on("change",".simpleimportproduct select.feed_source",function(){if($(this).val()=="file_url"){$(".simpleimportproduct .file_import_select").hide();$(".simpleimportproduct .file_import_ftp").hide();$(".simpleimportproduct .file_import_ftp_ssl").hide();$(".simpleimportproduct .file_import_url").show()}if($(this).val()=="file_upload"){$(".simpleimportproduct .file_import_url").hide();$(".simpleimportproduct .file_import_ftp").hide();$(".simpleimportproduct .file_import_ftp_ssl").hide();$(".simpleimportproduct .file_import_select").show()}if($(this).val()=="ftp"){$(".simpleimportproduct .file_import_select").hide();$(".simpleimportproduct .file_import_url").hide();$(".simpleimportproduct .file_import_ftp_ssl").hide();$(".simpleimportproduct .file_import_ftp").show()}if($(this).val()=="sftp"){$(".simpleimportproduct .file_import_select").hide();$(".simpleimportproduct .file_import_url").hide();$(".simpleimportproduct .file_import_ftp").hide();$(".simpleimportproduct .file_import_ftp_ssl").show()}});if($(".simpleimportproduct select.feed_source").val()=="sftp"){$(".simpleimportproduct .file_import_select").hide();$(".simpleimportproduct .file_import_ftp").hide();$(".simpleimportproduct .file_import_url").hide();$(".simpleimportproduct .file_import_ftp_ssl").show()}$(document).on("change",".simpleimportproduct .parser_import_val",function(){if($(this).val()=="product_id"){$(".simpleimportproduct .force_ids").show()}else{$(".simpleimportproduct .force_ids").hide()}});$(document).on("click",".delete_suppliers",function(){$(this).parents("#fieldset_12_12").remove()});$(document).on("click",".delete_image",function(){$(this).parents("#fieldset_6_6").remove()});$(document).on("click",".delete_suppliers_combination",function(){$(this).parents(".full_combination_supplier_item").remove()});$(document).on("click",".delete_price_condition",function(){$(this).parents(".price_settings_block").remove()});$(document).on("click",".delete_field_condition",function(){addCustomFieldsAgain();$(this).parents(".field_settings_block").remove()});$(document).on("click",".delete_quantity_condition",function(){$(this).parents(".quantity_settings_block").remove()});$(document).on("click",".delete_combination",function(){$(this).parents("#fieldset_3_3").remove()});$(document).on("click",".delete_discount",function(){$(this).parents("#fieldset_5_5").remove()});$(document).on("click",".delete_featured",function(){$(this).parents("#fieldset_7_7").remove()});$(document).on("click",".delete_customization",function(){$(this).parents("#fieldset_13_13").remove()});$(document).on("click",".delete_attachments",function(){$(this).parents("#fieldset_14_14").remove()});$(document).on("change",'input[name="has_discount"]',function(){hasDiscount()});$(document).on("change",'input[name="has_featured"]',function(){hasFeatures()});$(document).on("change",'input[name="has_accessories"]',function(){hasAccessories()});$(document).on("change",'input[name="has_pack"]',function(){hasPackProducts()});$(document).on("change",'input[name="save_config"]',function(){saveConfig()});$(document).on("change",'select[name="combinations_import_type"]',function(){$(this).parents("#fieldset_3_3").find(".full_combination").show();$(".full_combination_supplier_item.additional").remove();if($(this).val()!="one_field_combinations"){$(this).parents("#fieldset_3_3").find(".old_type").hide();if($(this).val()=="separated_field_value"){$(".additional_combinations").remove();$("#fieldset_3_3").find(".full_combination").hide();$("#fieldset_3_3").find(".old_type").hide();$("#fieldset_3_3").find(".form-group-images").hide();$('#fieldset_3_3 select[name="combinations_import_type"]').val("separated_field_value");$("#fieldset_3_3 .combinations_import_type .chosen-single span").html($(this).find("option:selected").text());addAttribute($('#fieldset_3_3 select[name="combinations_import_type"]'))}else{addAttribute($(this));$("#fieldset_3_3").find(".form-group-images").show()}}else{$(this).parents("#fieldset_3_3").find(".single_attribute").remove();$(this).parents("#fieldset_3_3").find(".old_type").show();$(this).parents("#fieldset_3_3").find(".form-group-images").show()}if($(this).val()=="one_field_combinations"){$(this).parents("#fieldset_3_3").find(".combinations_import_type .col-lg-9 .tutorial a").attr("href","http://faq.myprestamodules.com/product-catalog-csv-excel-import/combinations-import-combination-in-one-field-method.html")}if($(this).val()=="single_field_value"){$(this).parents("#fieldset_3_3").find(".combinations_import_type .col-lg-9 .tutorial a").attr("href","http://faq.myprestamodules.com/product-catalog-csv-excel-import/combinations-import-each-attribute-and-value-in-separate-field-method.html")}if($(this).val()=="separate_combination_row"){$(this).parents("#fieldset_3_3").find(".combinations_import_type .col-lg-9 .tutorial a").attr("href","http://faq.myprestamodules.com/product-catalog-csv-excel-import/combinations-import-each-combination-in-separate-row-in-file-.html")}if($(this).val()=="separated_field_value"){$("#fieldset_3_3").find(".combinations_import_type .col-lg-9 .tutorial a").attr("href","http://faq.myprestamodules.com/product-catalog-csv-excel-import/combinations-import-generate-combinations-from-attribute-values-method.html")}$.each($(".panel.combinations"),function(a){var b=$(this);var c=b.find("#supplier_method_combination").val();if(c=="supplier_name_method"){b.find(".supplier_id_combination").hide();b.find(".existing_supplier_combination").hide()}else{if(c=="supplier_ids_method"){b.find(".supplier_name_combination").hide();b.find(".existing_supplier_combination").hide()}else{b.find(".supplier_name_combination").hide();b.find(".supplier_id_combination").hide()}}})});$.each($(".content_import_page .pre_defined"),function(a){$(this).find(".chosen-container").append('<div class="pre_defined_info"></div><div class="pre_defined_block"><div class="title">Pre-defined Values</div><div class="message">This field has pre-defined values that you can select for import</div></div>')});$(".content_import_page .pre_defined_info").mouseover(function(){$(this).next(".pre_defined_block").fadeIn()}).mouseout(function(){$(this).next(".pre_defined_block").fadeOut()});$(".import_type_task_panel .frequency .input-group-addon .time_block .icon").mouseover(function(){$(".import_type_task_panel .help_info").fadeIn()}).mouseout(function(){$(".import_type_task_panel .help_info").fadeOut()});$(document).on("change",'select[name="single_attribute"]',function(){if($(this).val()=="enter_manually"){$(this).parents(".single_attribute").next().show()}else{$(this).parents(".single_attribute").next().hide()}});$(document).on("change",'select[name="single_attribute"]',function(){if($(this).val()=="existing_attribute"){$(this).parents(".form-wrapper").find(".existing_attribute").show();$(this).parents(".form-wrapper").find(".attribute_type").hide()}else{$(this).parents(".form-wrapper").find(".existing_attribute").hide();$(this).parents(".form-wrapper").find(".attribute_type").show()}});if($('select[name="single_type"]').val()=="color"){$(this).parents(".single_attribute").next().show()}else{$(this).parents(".single_attribute").next().hide();$(this).parents(".single_attribute").next().find("select option[value='no']").prop("selected",true).trigger("chosen:updated")}$(document).on("change",'select[name="single_type"]',function(){if($(this).val()=="color"){$(this).parents(".single_attribute").next().show()}else{$(this).parents(".single_attribute").next().hide();$(this).parents(".single_attribute").next().find("select option[value='no']").prop("selected",true).trigger("chosen:updated")}});$(document).on("change",'select[name="combination_key"]',function(){if($(this).val()=="attributes"){$(".panel.combinations .old_type").show();$(".panel.combinations .combinations_import_type").show();$('.panel.combinations select[name="combinations_import_type"]').val("one_field_combinations");$('.panel.combinations select[name="combinations_import_type"]').trigger("change")}else{$('.panel.combinations select[name="combinations_import_type"]').val("one_field_combinations");$('.panel.combinations select[name="combinations_import_type"]').trigger("change");$(".panel.combinations .old_type").hide();$(".panel.combinations .combinations_import_type").hide()}$(".content_import_page select").trigger("chosen:updated")});$(document).on("change",'select[name="features_name"], select[name="features_id"]',function(){if($(this).val()=="enter_manually"){$(this).parents(".form-wrapper").find(".features_name_manually").show()}else{$(this).parents(".form-wrapper").find(".features_name_manually").hide()}});$(document).on("change",'select[name="features_name_import_method"]',function(){$(this).parents(".form-wrapper").find(".features_name_manually").hide();if($(this).val()=="feature_name"){$(this).parents(".form-wrapper").find(".features_name").show();$(this).parents(".form-wrapper").find(".features_id").hide();$(this).parents(".form-wrapper").find(".existing_feature").hide();if($(this).parents(".form-wrapper").find('select[name="features_name"]').val()=="enter_manually"){$(this).parents(".form-wrapper").find(".features_name_manually").show()}}else{if($(this).val()=="feature_id"){$(this).parents(".form-wrapper").find(".features_name").hide();$(this).parents(".form-wrapper").find(".existing_feature").hide();$(this).parents(".form-wrapper").find(".features_id").show();if($(this).parents(".form-wrapper").find('select[name="features_id"]').val()=="enter_manually"){$(this).parents(".form-wrapper").find(".features_name_manually").show()}}else{$(this).parents(".form-wrapper").find(".features_name").hide();$(this).parents(".form-wrapper").find(".features_id").hide();$(this).parents(".form-wrapper").find(".existing_feature").show()}}});$.each($('select[name="features_name_import_method"]'),function(a){if($(this).val()=="feature_name"){$(this).parents(".form-wrapper").find(".features_name").show();$(this).parents(".form-wrapper").find(".features_id").hide();$(this).parents(".form-wrapper").find(".existing_feature").hide();if($(this).parents(".form-wrapper").find('select[name="features_name"]').val()=="enter_manually"){$(this).parents(".form-wrapper").find(".features_name_manually").show()}}else{if($(this).val()=="feature_id"){$(this).parents(".form-wrapper").find(".features_name").hide();$(this).parents(".form-wrapper").find(".existing_feature").hide();$(this).parents(".form-wrapper").find(".features_id").show();if($(this).parents(".form-wrapper").find('select[name="features_id"]').val()=="enter_manually"){$(this).parents(".form-wrapper").find(".features_name_manually").show()}}else{$(this).parents(".form-wrapper").find(".features_name").hide();$(this).parents(".form-wrapper").find(".features_id").hide();$(this).parents(".form-wrapper").find(".existing_feature").show()}}});$(document).on("click",".more_combination",function(){moreCombination($(this).parents("#fieldset_3_3"))});$(document).on("click",".more_suppliers",function(){moreSuppliers($(this).parents("#fieldset_12_12"),0)});$(document).on("click",".more_suppliers_combination",function(){moreSuppliersCombination($(this).parents(".full_combination_supplier_item"))});$(document).on("click",".add_price_condition",function(){addPriceCondition($(this).parents(".price_settings_block"))});$(document).on("click",".add_field_condition",function(){addFieldCondition();addCustomFieldsAgain()});$(document).on("click",".add_quantity_condition",function(){addQuantityCondition($(this).parents(".quantity_settings_block"))});$(document).on("keyup",".setting_new_field input",function(){addCustomFieldsAgain()});$(document).on("click",".add_attribute",function(){addAttribute($(this))});$(document).on("click",".delete_attribute",function(){$(this).parents(".single_attribute").prev().remove();$(this).parents(".single_attribute").prev().remove();$(this).parents(".single_attribute").prev().remove();$(this).parents(".single_attribute").prev().remove();$(this).parents(".single_attribute").prev().remove();$(this).parents(".single_attribute").prev().remove();$(this).parents(".single_attribute").prev().remove();$(this).parents(".single_attribute").remove()});if($("#combinations_import_type").first().val()!="one_field_combinations"&&$("#combinations_import_type").length>0){addAttribute($("#combinations_import_type").first(),0)}if($('select[name="combinations_import_type"]').first().val()=="separated_field_value"){$("#fieldset_3_3 .old_type").hide();$("#fieldset_3_3 .full_combination").hide();$("#fieldset_3_3 .form-group-images").hide();$("#fieldset_3_3").first().find(".combinations_import_type .col-lg-9").append('<div class="tutorial"><a class="need_help" target="_blank" href="http://faq.myprestamodules.com/product-catalog-csv-excel-import/combinations-import-generate-combinations-from-attribute-values-method.html">Need Help?</a></div>')}if($('select[name="combinations_import_type"]').first().val()=="single_field_value"){$("#fieldset_3_3").first().find(".old_type").hide();$("#fieldset_3_3").first().find(".combinations_import_type .col-lg-9").append('<div class="tutorial"><a class="need_help" target="_blank" href="http://faq.myprestamodules.com/product-catalog-csv-excel-import/combinations-import-each-attribute-and-value-in-separate-field-method.html">Need Help?</a></div>')}if($('select[name="combinations_import_type"]').first().val()=="separate_combination_row"){$("#fieldset_3_3").first().find(".old_type").hide();$("#fieldset_3_3").first().find(".combinations_import_type .col-lg-9").append('<div class="tutorial"><a class="need_help" target="_blank" href="http://faq.myprestamodules.com/product-catalog-csv-excel-import/combinations-import-each-combination-in-separate-row-in-file-.html">Need Help?</a></div>')}if($("#combinations_import_type").first().val()=="one_field_combinations"){$("#fieldset_3_3").first().find(".combinations_import_type .col-lg-9").append('<div class="tutorial"><a class="need_help" target="_blank" href="http://faq.myprestamodules.com/product-catalog-csv-excel-import/combinations-import-combination-in-one-field-method.html">Need Help?</a></div>')}$(document).on("click",".more_discount",function(){moreDiscount($(this).parents("#fieldset_5_5"),$("#key_settings").val())});$(document).on("click",".more_image",function(){moreImages($(this).parents("#fieldset_6_6"))});$(document).on("click",".more_featured",function(){moreFeatures($(this).parents("#fieldset_7_7"))});$(document).on("click",".more_customization",function(){moreCustomization($(this).parents("#fieldset_13_13"))});$(document).on("click",".more_attachments",function(){moreAttachments($(this).parents("#fieldset_14_14"))});$(document).on("click",".more_subcategory button",function(){moreSubcategory($(this).parent().attr("category"))});$(document).on("click",".more_category button",function(){moreCategory()});$(document).on("click",".more_image_comb button",function(){moreImagesCombination($(this).parent().prev())});$(document).on("click",".delete_one_subcategory",function(){var a=$(this).parent().parent().find(".count_cat").html();var b=parseInt($(".hidden_count_subcategory_"+a).val());$(".hidden_count_subcategory_"+a).val(b-1);$(this).parent().remove()});$(document).on("click",".delete_one_category",function(){$(this).parent().remove()});$(document).on("click",".delete_one_image",function(){$(this).parent().remove()});$(document).on("click",".simpleimportproduct .button_import",function(){importProducts(0)});$(document).on("click",".save_all_settings",function(){saveSettings()});$(document).on("click",".delete_config",function(){removeSettings($(this).attr("settings"))});if($("#combinations_more").val()==1&&($("#key_settings").val())){moreSuppliers($(".content_import_page #fieldset_12_12").last(),$("#key_settings").val())}if($("#combinations_more").val()==1&&($("#key_settings").val())){addCombinations()}if($("#features_more").val()==1&&($("#key_settings").val())){addFeatures()}if($("#customization_more").val()==1&&($("#key_settings").val())){addCustomization()}if($("#attachments_more").val()==1&&($("#key_settings").val())){addAttachments()}if($("#discount_more").val()==1&&($("#key_settings").val())){addDiscount()}if($("#key_settings").val()){addCategories()}if($("#field_images").val()==1&&($("#key_settings").val())){addImages()}$(document).on("click",".info_items .info_block .content .subscribe .error, .info_items .info_block .content .subscribe .success",function(){$(this).removeClass("error");$(this).removeClass("success");$(this).val("")});$(document).on("change",".add_settings input",function(){if($(this).val()){$(".upload_settings").show();$(this).parent().addClass("hover")}else{$(".upload_settings").hide();$(this).parent().removeClass("hover")}});$(document).on("click",".upload_settings",function(){var a=new FormData();a.append("file",$(".add_settings input")[0].files[0]);a.append("ajax",true);a.append("token",$("input[name=products_import_token]").val());a.append("controller","AdminProductsimport");a.append("action","uploadSettings");$.ajax({url:"index.php",type:"post",data:a,dataType:"json",processData:false,contentType:false,beforeSend:function(){$("body").append('<div class="progres_bar_ex"><div class="loading"><div></div></div></div>')},success:function(b){$(".alert-danger, .alert-success").remove();if(!b){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please check <a href="../modules/simpleimportproduct/error/error.log" target="_blank">error.log</a> file or contact us!</div>')}if(b.error){$(".progres_bar_ex").remove();$(".panel-heading-gomakoil").before('<div class="alert alert-danger">'+b.error+"</div>");$(document).scrollTop(0)}else{if(b.success){location.href=location.href}else{$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please check <a href="../modules/simpleimportproduct/error/error.log" target="_blank">error.log</a> file or contact us!</div>')}}},error:function(b){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(b.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please check <a href="../modules/simpleimportproduct/error/error.log" target="_blank">error.log</a> file or contact us!</div>')}}})});$(document).on("click",".save_scroll .download_settings",function(){$.ajax({type:"POST",url:"index.php",dataType:"json",data:{ajax:true,token:$("input[name=products_import_token]").val(),controller:"AdminProductsimport",action:"downloadSettings",settings:$(this).attr("data-settings")},success:function(a){if(a.download){location.href=a.download}}})});$(document).on("click",".info_items .info_block .content .subscribe .send",function(){$(".info_items .info_block .content .subscribe input").removeClass("error");$(".info_items .info_block .content .subscribe input").removeClass("success");$.ajax({type:"POST",url:"index.php",dataType:"json",data:{ajax:true,token:$("input[name=products_import_token]").val(),controller:"AdminProductsimport",action:"subscribe",email:$(".info_items .info_block .content .subscribe input").val()},success:function(a){if(a.success){$(".info_items .info_block .content .subscribe input").val(a.success);$(".info_items .info_block .content .subscribe input").addClass("success")}if(a.error){$(".info_items .info_block .content .subscribe input").val(a.error);$(".info_items .info_block .content .subscribe input").addClass("error")}}})});$(document).on("click",".version_block .check_updates",function(){$(".version_block .module_version .last_version").html("---");$.ajax({type:"POST",url:"index.php",dataType:"json",data:{ajax:true,token:$("input[name=products_import_token]").val(),controller:"AdminProductsimport",action:"checkVersion"},success:function(b){if(b.module_version){$(".version_block .module_version .last_version").html(b.module_version);var a=$.trim($(".version_block .module_version .current_version").html());if(b.module_version!=a){$(".version_block .update").css("display","inline-block");$(".version_block .version_ok").hide();$(".version_block .version_not_ok").show()}}if(b.error){$(".version_block .module_version .last_version").html(b.error)}}})});$(document).on("click",".import_progress .back_to_settings",function(){$(".import_progress").hide();$("#configuration_form").show();$(".productTabs").show()});$(document).on("click",".import_progress .re_import",function(){importProducts(0)});$(document).on("click",".import_progress .stop",function(){$(".import_progress .import_info .status span").html("Stopping");stopImport=1;returnAddProducts($("input[name=id_shop]").val(),0,3)});addHelpButtons();addFieldsLabel();$(document).on("click",".field_settings .add_to_fieldlist",function(){var b=[];var a=false;$.each($(".field_settings .setting_new_field input"),function(c){if($(this).val()){b[c]=$(this).val()}else{a=true;importError.show($(this),importError.ERROR_TYPE_ERROR,"Please enter Field Name!")}});if(!a){saveSettings()}});if($(".import_settings_name").length>0){$(".search_settings_block").appendTo(".import_settings_name .col-lg-9");$(document).on("click","body",function(a){if($(".search_settings_block .saved_settings").is(":visible")&&!$(a.target).hasClass("icon")){$(".search_settings_block .saved_settings").hide()}})}$(document).on("change",".import_type_task_panel .email_notification input",function(){if($(this).val()==1){$(".import_type_task_panel .emails_form").show();$(".import_type_task_panel .error_email").show()}else{$(".import_type_task_panel .emails_form").hide();$(".import_type_task_panel .error_email").hide()}});if($(".import_type_task_panel").length>0){if($(".import_type_task_panel .email_notification input:checked").val()==1){$(".import_type_task_panel .emails_form").show();$(".import_type_task_panel .error_email").show()}}$(document).on("click",".search_settings_block .icon",function(){$(".search_settings_block .saved_settings").show()});$(document).on("keyup",".import_type_task_panel #frequency",function(){var a=$(this).val();if(!a){$(".import_type_task_panel .frequency").addClass("error")}else{$.ajax({type:"POST",url:"index.php",dataType:"json",data:{ajax:true,token:$("input[name=products_import_token]").val(),controller:"AdminProductsimport",action:"checkExpression",expression:a},success:function(b){if(b.human_description){$(".frequency_description .description_text").html("«"+b.human_description+"»");$(".import_type_task_panel .frequency").removeClass("error")}if(b.next_run){$(".import_type_task_panel .frequency .input-group-addon .time").html(b.next_run)}if(b.expression){$(".frequency_description .minutes .value").html(b.expression["min"]);$(".frequency_description .hours .value").html(b.expression["hour"]);$(".frequency_description .day_of_month .value").html(b.expression["day_of_month"]);$(".frequency_description .month .value").html(b.expression["month"]);$(".frequency_description .day_of_week .value").html(b.expression["day_of_week"])}if(b.error){$(".import_type_task_panel .frequency").addClass("error")}}})}});if($(".import_type_task_panel .frequency").length>0){$(".import_type_task_panel #frequency").trigger("keyup")}$(document).on("click",".field_list_block .field_list .copy",function(){copyToClipboard($(this).attr("data-field"));$(".field_list_block .field_list .copy").removeClass("copied");$(this).addClass("copied");$(".field_list_block .field_list .copy").html($(this).attr("data-copy"));$(this).html($(this).attr("data-copied"))});$(document).on("click",".field_list_block .description .hide_fields",function(){if($(this).hasClass("show_fields")){$(this).removeClass("show_fields");$(".field_list_block .field_list").slideDown()}else{$(".field_list_block .field_list").slideUp();$(this).addClass("show_fields")}});$(document).on("focus",".field_list_block .description .search_field input",function(){$(this).parent().addClass("active")});$(document).on("focusout",".field_list_block .description .search_field input",function(){$(this).parent().removeClass("active")});$(document).on("keyup",".field_list_block .description .search_field input",function(){$(".field_list_block .field_list .field_name").show();$(".field_list_block .field_list .copy_block").show();var a=$(this).val();if(a){$.each($(".field_list_block .field_list .field_name"),function(b){if($(this).html().toLowerCase().indexOf(a.toLowerCase())===-1){$(".field_list_block .field_list .copy_block").eq(b).hide();$(this).hide()}})}});$(".content_import_page .custom_fields_block").sortable({handle:".move",revert:false,axis:"y"})});function addCustomFieldsAgain(){$(".add_to_fieldlist").show();$(".custom_fields_added").hide()}function addFieldsLabel(){$.each($(".pre_defined select"),function(b){$.each($(this).find("option"),function(c){if($(this).val().indexOf("{pre_saved}")!==-1){$(this).attr("class","pre_saved")}})});var a=[];$.each($(".field_settings .setting_new_field input"),function(b){if($(this).val()){a[b]=$(this).val()}});$.each($(".content_import_page select"),function(b){if($(this).attr("name")!="formula_type"){$.each($(this).find("option"),function(c){if($.inArray($(this).val(),a)!=-1){$(this).attr("class","custom_field")}})}});$(".content_import_page select").trigger("chosen:updated")}function addHelpButtons(){$(".content_import_page .categories_import_method .col-lg-9").append('<div class="tutorial"><a class="need_help" target="_blank" href="http://faq.myprestamodules.com/product-catalog-csv-excel-import/categories-import.html">Need Help?</a></div>');$(".content_import_page .remove_images .col-lg-9").append('<div class="tutorial"><a class="need_help" target="_blank" href="http://faq.myprestamodules.com/product-catalog-csv-excel-import/images-import.html">Need Help?</a></div>');$(".content_import_page .file_url .col-lg-9").append('<div class="tutorial"><a class="need_help" target="_blank" href="http://faq.myprestamodules.com/product-catalog-csv-excel-import/virtual-products-import.html">Need Help?</a></div>');$(".content_import_page .has_accessories .col-lg-9").append('<div class="tutorial"><a class="need_help" target="_blank" href="http://faq.myprestamodules.com/product-catalog-csv-excel-import/accessories-import.html">Need Help?</a></div>');$(".content_import_page .remove_pack_products .col-lg-9").append('<div class="tutorial"><a class="need_help" target="_blank" href="http://faq.myprestamodules.com/product-catalog-csv-excel-import/pack-products-import.html">Need Help?</a></div>');$(".content_import_page .remove_attachments .col-lg-9").append('<div class="tutorial"><a class="need_help" target="_blank" href="http://faq.myprestamodules.com/product-catalog-csv-excel-import/attachments-import.html">Need Help?</a></div>');$(".content_import_page .remove_customization .col-lg-9").append('<div class="tutorial"><a class="need_help" target="_blank" href="http://faq.myprestamodules.com/product-catalog-csv-excel-import/customization-import.html">Need Help?</a></div>');$(".content_import_page .remove_features .col-lg-9").append('<div class="tutorial"><a class="need_help" target="_blank" href="http://faq.myprestamodules.com/product-catalog-csv-excel-import/features-import.html">Need Help?</a></div>');$(".content_import_page .has_discount .col-lg-9").append('<div class="tutorial"><a class="need_help" target="_blank" href="http://faq.myprestamodules.com/product-catalog-csv-excel-import/specific-prices-import.html">Need Help?</a></div>');$(".content_import_page .import_type .col-lg-9").append('<div class="tutorial"><a class="need_help" target="_blank" href="http://faq.myprestamodules.com/product-catalog-csv-excel-import/automatic-import.html">Need Help?</a></div>')}function addAttribute(b,a){if(!a&&a!=0){a=false}$.ajax({type:"POST",url:"index.php",dataType:"json",data:{ajax:true,token:$("input[name=products_import_token]").val(),controller:"AdminProductsimport",action:"addAttribute",id_shop:$("input[name=id_shop]").val(),id_lang:$("input[name=id_lang]").val(),key_settings:$("#key_settings").val(),load_settings:a},success:function(c){if(c.attribute){if(b.hasClass("add_attribute")){b=b.parents("#fieldset_3_3");b.find(".single_attribute").last().after(c.attribute)}else{b=b.parents("#fieldset_3_3");if(b.find(".single_attribute").length>0){b.find(".single_attribute").remove()}b.find(".combinations_import_type").after(c.attribute)}b.find(".chosen").chosen();b.find(".label-tooltip").tooltip();if(b.find(".single_attribute").length>4){$(".delete_attribute").show();$(".delete_attribute").first().hide()}if(b.find("#combinations_import_type").val()=="separated_field_value"){b.find(".single_delimiter").show()}}},error:function(c){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(c.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function addCategories(){$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"addCategories=true&ajax=true&key_settings="+$("#key_settings").val()+"&id_shop="+$("input[name=id_shop]").val()+"&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_lang="+$("input[name=id_lang]").val(),dataType:"json",success:function(a){if(a.page){$(".content_import_page #fieldset_0 .form-group-categories .col-lg-9").replaceWith(a.page);addFieldsLabel()}},error:function(a){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(a.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function addCombinations(){$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"addCombinations=true&ajax=true&key_settings="+$("#key_settings").val()+"&id_shop="+$("input[name=id_shop]").val()+"&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_lang="+$("input[name=id_lang]").val(),dataType:"json",success:function(a){if(a.page){$(".content_import_page #fieldset_3_3").last().after(a.page);$.each($(".panel.combinations"),function(b){var c=$(this);var d=c.find("#supplier_method_combination").val();if(d=="supplier_name_method"){c.find(".supplier_id_combination").hide();c.find(".existing_supplier_combination").hide()}else{if(d=="supplier_ids_method"){c.find(".supplier_name_combination").hide();c.find(".existing_supplier_combination").hide()}else{c.find(".supplier_name_combination").hide();c.find(".supplier_id_combination").hide()}}});if($('select[name="combination_key"]').val()!="attributes"){$('.panel.combinations select[name="combinations_import_type"]').val("one_field_combinations");$('.panel.combinations select[name="combinations_import_type"]').trigger("change");$(".panel.combinations .old_type").hide();$(".panel.combinations .combinations_import_type").hide()}addFieldsLabel()}},error:function(a){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(a.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function addAttachments(){$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"addAttachments=true&ajax=true&key_settings="+$("#key_settings").val()+"&id_shop="+$("input[name=id_shop]").val()+"&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_lang="+$("input[name=id_lang]").val(),dataType:"json",success:function(a){if(a.page){$(".content_import_page #fieldset_14_14").last().after(a.page);addFieldsLabel()}},error:function(a){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(a.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function addCustomization(){$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"addCustomization=true&ajax=true&key_settings="+$("#key_settings").val()+"&id_shop="+$("input[name=id_shop]").val()+"&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_lang="+$("input[name=id_lang]").val(),dataType:"json",success:function(a){if(a.page){$(".content_import_page #fieldset_13_13").last().after(a.page);addFieldsLabel()}},error:function(a){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(a.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function addImages(){$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"addImages=true&ajax=true&key_settings="+$("#key_settings").val()+"&id_shop="+$("input[name=id_shop]").val()+"&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_lang="+$("input[name=id_lang]").val(),dataType:"json",success:function(a){if(a.page){$(".content_import_page #fieldset_6_6").last().after(a.page);addFieldsLabel()}},error:function(a){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(a.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function addFeatures(){$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"addFeatures=true&ajax=true&key_settings="+$("#key_settings").val()+"&id_shop="+$("input[name=id_shop]").val()+"&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_lang="+$("input[name=id_lang]").val(),dataType:"json",success:function(a){if(a.page){$(".content_import_page #fieldset_7_7").last().after(a.page);addFieldsLabel();$.each($(".features"),function(b){if($(this).find("select[name=features_name_import_method]").val()=="feature_name"){if($(this).find("select[name=features_name]").val()=="enter_manually"){$(this).find(".features_name_manually").show()}$(this).find(".features_name").show();$(this).find(".features_id").hide();$(this).find(".existing_feature").hide()}else{if($(this).find("select[name=features_name_import_method]").val()=="feature_id"){if($(this).find("select[name=features_id]").val()=="enter_manually"){$(this).find(".features_name_manually").show()}$(this).find(".features_name").hide();$(this).find(".features_id").show();$(this).find(".existing_feature").hide()}else{$(this).find(".features_name").hide();$(this).find(".features_id").hide();$(this).find(".existing_feature").show()}}})}},error:function(a){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(a.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function addDiscount(){$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"addDiscount=true&ajax=true&key_settings="+$("#key_settings").val()+"&id_shop="+$("input[name=id_shop]").val()+"&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_lang="+$("input[name=id_lang]").val(),dataType:"json",success:function(a){if(a.page){$(".content_import_page #fieldset_5_5").last().after(a.page);addFieldsLabel()}},error:function(a){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(a.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function moreImagesCombination(b){var a=parseInt(b.find(".count_img").html())+1;$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"moreImagesCombination=true&ajax=true&hidden_count_images="+a+"&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_shop="+$("input[name=id_shop]").val()+"&id_lang="+$("input[name=id_lang]").val(),dataType:"json",beforeSend:function(){$("body").append('<div class="progres_bar_ex"><div class="loading"><div></div></div></div>')},complete:function(){$(".progres_bar_ex").remove()},success:function(c){$(".alert-danger, .alert-success").remove();if(c.error){$(document).scrollTop(0);$("#bootstrap_products_import").append('<div class="alert alert-danger">'+c.error+"</div>")}else{if(c.page){b.after(c.page);$(".chosen").chosen();addFieldsLabel()}}},error:function(c){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(c.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function moreCategory(){var a=parseInt($(".one_category_block").last().find(".count_cat").html())+1;$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"moreCategory=true&ajax=true&hidden_count_category="+a+"&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_shop="+$("input[name=id_shop]").val()+"&id_lang="+$("input[name=id_lang]").val(),dataType:"json",beforeSend:function(){$("body").append('<div class="progres_bar_ex"><div class="loading"><div></div></div></div>')},complete:function(){$(".progres_bar_ex").remove()},success:function(b){$(".alert-danger, .alert-success").remove();if(b.error){$(document).scrollTop(0);$("#bootstrap_products_import").append('<div class="alert alert-danger">'+b.error+"</div>")}else{if(b.page){var c=a-1;$(".one_category_block_"+c).after(b.page);if($(".simpleimportproduct select[name=category_method]").val()=="category_tree_method"){$(".more_subcategory").hide()}addFieldsLabel()}}},error:function(b){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(b.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function moreSubcategory(a){var b=parseInt($(".hidden_count_subcategory_"+a).val())+1;$(".hidden_count_subcategory_"+a).val(b);$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"moreSubcategory=true&ajax=true&hidden_count_subcategory="+b+"&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_shop="+$("input[name=id_shop]").val()+"&id_lang="+$("input[name=id_lang]").val(),dataType:"json",beforeSend:function(){$("body").append('<div class="progres_bar_ex"><div class="loading"><div></div></div></div>')},complete:function(){$(".progres_bar_ex").remove()},success:function(c){$(".alert-danger, .alert-success").remove();if(c.error){$(document).scrollTop(0);$("#bootstrap_products_import").append('<div class="alert alert-danger">'+c.error+"</div>")}else{if(c.page){var d=parseInt(b)-1;$(".one_category_block_"+a+" .one_subcategory").last().after(c.page);addFieldsLabel()}}},error:function(c){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(c.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function moreAttachments(a){$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"moreAttachments=true&ajax=true&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_shop="+$("input[name=id_shop]").val()+"&id_lang="+$("input[name=id_lang]").val(),dataType:"json",beforeSend:function(){$("body").append('<div class="progres_bar_ex"><div class="loading"><div></div></div></div>')},complete:function(){$(".progres_bar_ex").remove()},success:function(b){$(".alert-danger, .alert-success").remove();if(b.error){$(document).scrollTop(0);$("#bootstrap_products_import").append('<div class="alert alert-danger">'+b.error+"</div>")}else{if(b.page){a.after(b.page);addFieldsLabel()}}},error:function(b){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(b.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function moreCustomization(a){$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"moreCustomization=true&ajax=true&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_shop="+$("input[name=id_shop]").val()+"&id_lang="+$("input[name=id_lang]").val(),dataType:"json",beforeSend:function(){$("body").append('<div class="progres_bar_ex"><div class="loading"><div></div></div></div>')},complete:function(){$(".progres_bar_ex").remove()},success:function(b){$(".alert-danger, .alert-success").remove();if(b.error){$(document).scrollTop(0);$("#bootstrap_products_import").append('<div class="alert alert-danger">'+b.error+"</div>")}else{if(b.page){a.after(b.page);addFieldsLabel()}}},error:function(b){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(b.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function moreFeatures(a){$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"moreFeatures=true&ajax=true&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_shop="+$("input[name=id_shop]").val()+"&id_lang="+$("input[name=id_lang]").val(),dataType:"json",beforeSend:function(){$("body").append('<div class="progres_bar_ex"><div class="loading"><div></div></div></div>')},complete:function(){$(".progres_bar_ex").remove()},success:function(b){$(".alert-danger, .alert-success").remove();if(b.error){$(document).scrollTop(0);$("#bootstrap_products_import").append('<div class="alert alert-danger">'+b.error+"</div>")}else{if(b.page){a.after(b.page);addFieldsLabel()}}},error:function(b){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(b.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function moreImages(a){$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"moreImages=true&ajax=true&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_shop="+$("input[name=id_shop]").val()+"&id_lang="+$("input[name=id_lang]").val(),dataType:"json",beforeSend:function(){$("body").append('<div class="progres_bar_ex"><div class="loading"><div></div></div></div>')},complete:function(){$(".progres_bar_ex").remove()},success:function(b){$(".alert-danger, .alert-success").remove();if(b.error){$(document).scrollTop(0);$("#bootstrap_products_import").append('<div class="alert alert-danger">'+b.error+"</div>")}else{if(b.page){a.after(b.page);addFieldsLabel()}}},error:function(b){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(b.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function moreDiscount(a,b){$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"moreDiscount=true&ajax=true&key="+b+"&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_shop="+$("input[name=id_shop]").val()+"&id_lang="+$("input[name=id_lang]").val(),dataType:"json",beforeSend:function(){$("body").append('<div class="progres_bar_ex"><div class="loading"><div></div></div></div>')},complete:function(){$(".progres_bar_ex").remove()},success:function(c){$(".alert-danger, .alert-success").remove();if(c.error){$(document).scrollTop(0);$("#bootstrap_products_import").append('<div class="alert alert-danger">'+c.error+"</div>")}else{if(c.page){a.after(c.page);changeDiscount();addFieldsLabel()}}}})}function addQuantityCondition(a){$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"addQuantityCondition=true&ajax=true&token="+$("input[name=products_import_token]").val()+"&id_shop="+$("input[name=id_shop]").val()+"&id_lang="+$("input[name=id_lang]").val(),dataType:"json",beforeSend:function(){$("body").append('<div class="progres_bar_ex"><div class="loading"><div></div></div></div>')},complete:function(){$(".progres_bar_ex").remove()},success:function(b){$(".alert-danger, .alert-success").remove();if(b.error){$(document).scrollTop(0);$("#bootstrap_products_import").append('<div class="alert alert-danger">'+b.error+"</div>")}else{if(b.page){a.after(b.page);addFieldsLabel()}}},error:function(b){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(b.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function addFieldCondition(){$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"addFieldCondition=true&ajax=true&token="+$("input[name=products_import_token]").val()+"&id_shop="+$("input[name=id_shop]").val()+"&id_lang="+$("input[name=id_lang]").val(),dataType:"json",beforeSend:function(){$("body").append('<div class="progres_bar_ex"><div class="loading"><div></div></div></div>')},complete:function(){$(".progres_bar_ex").remove()},success:function(a){$(".alert-danger, .alert-success").remove();if(a.error){$(document).scrollTop(0);$("#bootstrap_products_import").append('<div class="alert alert-danger">'+a.error+"</div>")}else{if(a.page){$(".field_settings_block").last().after(a.page);addFieldsLabel()}}},error:function(a){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(a.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function addPriceCondition(a){$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"addPriceCondition=true&ajax=true&token="+$("input[name=products_import_token]").val()+"&id_shop="+$("input[name=id_shop]").val()+"&id_lang="+$("input[name=id_lang]").val(),dataType:"json",beforeSend:function(){$("body").append('<div class="progres_bar_ex"><div class="loading"><div></div></div></div>')},complete:function(){$(".progres_bar_ex").remove()},success:function(b){$(".alert-danger, .alert-success").remove();if(b.error){$(document).scrollTop(0);$("#bootstrap_products_import").append('<div class="alert alert-danger">'+b.error+"</div>")}else{if(b.page){a.after(b.page);addFieldsLabel()}}},error:function(b){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(b.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function moreSuppliersCombination(a){$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"moreSuppliersCombination=true&ajax=true&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_shop="+$("input[name=id_shop]").val()+"&id_lang="+$("input[name=id_lang]").val(),dataType:"json",beforeSend:function(){$("body").append('<div class="progres_bar_ex"><div class="loading"><div></div></div></div>')},complete:function(){$(".progres_bar_ex").remove()},success:function(b){$(".alert-danger, .alert-success").remove();if(b.error){$(document).scrollTop(0);$("#bootstrap_products_import").append('<div class="alert alert-danger">'+b.error+"</div>")}else{if(b.page){a.after(b.page);var c=a.parents("#fieldset_3_3").find("#supplier_method_combination").val();if(c=="supplier_name_method"){a.next().find(".supplier_id_combination").hide();a.next().find(".existing_supplier_combination").hide()}else{if(c=="supplier_ids_method"){a.next().find(".supplier_name_combination").hide();a.next().find(".existing_supplier_combination").hide()}else{a.next().find(".supplier_name_combination").hide();a.next().find(".supplier_id_combination").hide()}}addFieldsLabel()}}},error:function(b){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(b.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function moreSuppliers(a,b){$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"moreSuppliers=true&ajax=true&key_settings="+b+"&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_shop="+$("input[name=id_shop]").val()+"&id_lang="+$("input[name=id_lang]").val(),dataType:"json",beforeSend:function(){$("body").append('<div class="progres_bar_ex"><div class="loading"><div></div></div></div>')},complete:function(){$(".progres_bar_ex").remove()},success:function(c){$(".alert-danger, .alert-success").remove();if(c.error){$(document).scrollTop(0);$("#bootstrap_products_import").append('<div class="alert alert-danger">'+c.error+"</div>")}else{if(c.page){a.after(c.page);if($("select[name=supplier_method]").val()=="supplier_name_method"){$(".simpleimportproduct .supplier_id_method").hide();$(".simpleimportproduct .existing_supplier_method").hide()}else{if($("select[name=supplier_method]").val()=="supplier_ids_method"){$(".simpleimportproduct .supplier_name_method").hide();$(".simpleimportproduct .existing_supplier_method").hide()}else{$(".simpleimportproduct .supplier_name_method").hide();$(".simpleimportproduct .supplier_id_method").hide()}}addFieldsLabel()}}},error:function(c){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(c.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function moreCombination(a){$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"moreCombination=true&ajax=true&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_shop="+$("input[name=id_shop]").val()+"&id_lang="+$("input[name=id_lang]").val(),dataType:"json",beforeSend:function(){$("body").append('<div class="progres_bar_ex"><div class="loading"><div></div></div></div>')},complete:function(){$(".progres_bar_ex").remove()},success:function(b){$(".alert-danger, .alert-success").remove();if(b.error){$(document).scrollTop(0);$("#bootstrap_products_import").append('<div class="alert alert-danger">'+b.error+"</div>")}else{if(b.page){a.after(b.page);$.each($(".panel.combinations"),function(c){var d=$(this);var e=d.find("#supplier_method_combination").val();if(e=="supplier_name_method"){d.find(".supplier_id_combination").hide();d.find(".existing_supplier_combination").hide()}else{if(e=="supplier_ids_method"){d.find(".supplier_name_combination").hide();d.find(".existing_supplier_combination").hide()}else{d.find(".supplier_id_combination").hide();d.find(".supplier_name_combination").hide()}}});if($('select[name="combination_key"]').val()!="attributes"){$('.panel.combinations select[name="combinations_import_type"]').val("one_field_combinations");$('.panel.combinations select[name="combinations_import_type"]').trigger("change");$(".panel.combinations .old_type").hide();$(".panel.combinations .combinations_import_type").hide()}addFieldsLabel()}}},error:function(b){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(b.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function copyToClipboard(b){var a=$("<input>");$("body").append(a);a.val(b).select();document.execCommand("copy");a.remove()}function saveConfig(){var a=$('input[name="save_config"]:checked').val();if(a=="1"){$(".content_import_page #fieldset_18_18").show()}else{$(".content_import_page #fieldset_18_18").hide()}}function hasCombination(){var a=$('input[name="has_combination"]:checked').val();if(a=="1"){$(".content_import_page #fieldset_3_3").show()}else{$(".content_import_page #fieldset_3_3").hide()}}function hasDiscount(){var b=$('input[name="has_discount"]:checked').val();var a=$(".import_tabs .import_tab.active").attr("data-tab");if(b=="1"&&a=="prices"){$(".content_import_page #fieldset_5_5").show()}else{$(".content_import_page #fieldset_5_5").hide()}}function hasFeatures(){var a=$('input[name="has_featured"]:checked').val();if(a=="1"){$(".content_import_page #fieldset_7_7").show()}else{$(".content_import_page #fieldset_7_7").hide()}}function hasAccessories(){var b=$('input[name="has_accessories"]:checked').val();var a=$(".import_tabs .import_tab.active").attr("data-tab");if(b=="1"&&a=="associations"){$(".content_import_page #fieldset_9_9").show()}else{$(".content_import_page #fieldset_9_9").hide()}}function hasPackProducts(){var a=$('input[name="has_pack"]:checked').val();if(a=="1"){$(".content_import_page #fieldset_11_11").show()}else{$(".content_import_page #fieldset_11_11").hide()}}function stepTwoImportFromUrl(){$.ajax({type:"POST",url:"index.php",dataType:"json",data:{ajax:true,token:$("input[name=products_import_token]").val(),controller:"AdminProductsimport",action:"loadFile",id_shop:$("input[name=id_shop]").val(),id_lang:$("select[name=id_lang]").val(),id_shop_group:$("input[name=id_shop_group]").val(),format_file:$(".format_file").val(),delimiter_val:$(".delimiter_val").val(),import_type_val:$("#import_type_val").val(),parser_import_val:$(".parser_import_val").val(),combination_identification:$(".combination_identification").val(),use_headers:$("input[name=use_headers]:checked").val(),disable_hooks:$("input[name=disable_hooks]:checked").val(),search_index:$("input[name=search_index]:checked").val(),products_range:$("input[name=products_range]:checked").val(),from_range:$("input[name=from_range]").val(),to_range:$("input[name=to_range]").val(),force_ids:$("input[name=force_ids]:checked").val(),iteration:$("#iteration").val(),file_url:$("input[name=file_import_url]").val(),feed_source:$("select[name=feed_source]").val(),file_import_ftp_server:$("input[name=file_import_ftp_server]").val(),file_import_ftp_user:$("input[name=file_import_ftp_user]").val(),file_import_ftp_password:$("input[name=file_import_ftp_password]").val(),file_import_ftp_port:$("input[name=file_import_ftp_port]").val(),file_import_ftp_port_ssl:$("input[name=file_import_ftp_port_ssl]").val(),passive_mode:$("select[name=passive_mode]").val(),remove_ftp_file:$("select[name=remove_ftp_file]").val(),file_import_ftp_file_path:$("input[name=file_import_ftp_file_path]").val(),import_settings_name:$("input[name=import_settings_name]").val(),setting_id:$("input[name=setting_id]").val()},beforeSend:function(){$("body").append('<div class="progres_bar_ex"><div class="loading"><div></div></div></div>')},success:function(a){$(".alert-danger, .alert-success").remove();if(!a){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}if(a.error){$(".progres_bar_ex").remove();$(".panel-heading-gomakoil").before('<div class="alert alert-danger">'+a.error+"</div>");$(document).scrollTop(0)}else{if(a.page){location.href=$("#location_href").val()+"&module_tab=step_2"}else{$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}},error:function(a){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(a.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function stepTwoImport(){var a=new FormData();a.append("file",$("input[name=file_import]")[0].files[0]);a.append("stepTwo",true);a.append("ajax",true);a.append("id_lang",$(".id_lang").val());a.append("id_shop",$('input[name="id_shop"]').val());a.append("id_shop_group",$('input[name="id_shop_group"]').val());a.append("format_file",$(".format_file").val());a.append("delimiter_val",$(".delimiter_val").val());a.append("import_type_val",$("#import_type_val").val());a.append("parser_import_val",$(".parser_import_val").val());a.append("combination_identification",$(".combination_identification").val());a.append("use_headers",$("input[name=use_headers]:checked").val());a.append("disable_hooks",$("input[name=disable_hooks]:checked").val());a.append("search_index",$("input[name=search_index]:checked").val());a.append("products_range",$("input[name=products_range]:checked").val());a.append("from_range",$("input[name=from_range]").val());a.append("to_range",$("input[name=to_range]").val());a.append("force_ids",$("input[name=force_ids]:checked").val());a.append("iteration",$("#iteration").val());a.append("feed_source",$("select[name=feed_source]").val());a.append("token",$("input[name=products_import_token]").val());a.append("import_settings_name",$("input[name=import_settings_name]").val());a.append("setting_id",$("input[name=setting_id]").val());a.append("controller","AdminProductsimport");a.append("action","send");$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:a,dataType:"json",processData:false,contentType:false,beforeSend:function(){$("body").append('<div class="progres_bar_ex"><div class="loading"><div></div></div></div>')},success:function(b){$(".alert-danger, .alert-success").remove();if(!b){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please check <a href="../modules/simpleimportproduct/error/error.log" target="_blank">error.log</a> file or contact us!</div>')}if(b.error){$(".progres_bar_ex").remove();$(".panel-heading-gomakoil").before('<div class="alert alert-danger">'+b.error+"</div>");$(document).scrollTop(0)}else{if(b.page){location.href=$("#location_href").val()+"&module_tab=step_2"}else{$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please check <a href="../modules/simpleimportproduct/error/error.log" target="_blank">error.log</a> file or contact us!</div>')}}},error:function(b){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(b.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please check <a href="../modules/simpleimportproduct/error/error.log" target="_blank">error.log</a> file or contact us!</div>')}}})}function saveSettings(){$('input[name="settings_save"]').css("border-color","#ccc");var c=$('input[name="id_shop"]').val();var a=$('input[name="settings_save"]').val();var b=$('input[name="key_settings"]').val();var d="";if(!a){$('input[name="settings_save"]').css("border-color","red");return false}$.each($(".simpleimportproduct #fieldset_0 .form-group select"),function(e,f){if(f.name!=="category"&&$(this).parents(".price_settings_block").length==0&&$(this).parents(".quantity_settings_block").length==0&&$(this).parents(".field_settings_block").length==0){d+="&field["+f.name+"]="+encodeURIComponent(f.value)}});d+="&field[remove_categories]="+encodeURIComponent($("input[name='remove_categories']:checked").val());d+="&field[remove_suppliers]="+encodeURIComponent($("input[name='remove_suppliers']:checked").val());d+="&field[disable_zero_products]="+encodeURIComponent($("input[name='disable_zero_products']:checked").val());$.each($(".simpleimportproduct #fieldset_0 .from_categories input").serializeArray(),function(e,f){d+="&import_from_categories["+e+"]="+encodeURIComponent(f.value)});$.each($(".simpleimportproduct #fieldset_0 .from_suppliers input").serializeArray(),function(e,f){d+="&import_from_suppliers["+e+"]="+encodeURIComponent(f.value)});$.each($(".simpleimportproduct #fieldset_0 .from_brands input").serializeArray(),function(e,f){d+="&import_from_brands["+e+"]="+encodeURIComponent(f.value)});$.each($(".simpleimportproduct #fieldset_0 .field_settings_block"),function(e){$.each($(this).find(".form-group-field-settings select"),function(f,g){d+="&field_settings["+e+"]["+g.name+"]="+encodeURIComponent(g.value)});$.each($(this).find(".form-group-field-settings input"),function(f,g){if($(this).attr("name")){d+="&field_settings["+e+"]["+$(this).attr("name")+"]="+encodeURIComponent($(this).val())}})});$.each($(".simpleimportproduct #fieldset_0 .price_settings_block"),function(e){$.each($(this).find(".form-group-price-settings select"),function(f,g){d+="&price_settings["+e+"]["+g.name+"]="+encodeURIComponent(g.value)});$.each($(this).find(".form-group-price-settings input"),function(f,g){if($(this).attr("name")){d+="&price_settings["+e+"]["+$(this).attr("name")+"]="+encodeURIComponent($(this).val())}})});$.each($(".simpleimportproduct #fieldset_0 .quantity_settings_block"),function(e){$.each($(this).find(".form-group-quantity-settings select"),function(f,g){d+="&quantity_settings["+e+"]["+g.name+"]="+encodeURIComponent(g.value)});$.each($(this).find(".form-group-quantity-settings input"),function(f,g){if($(this).attr("name")){d+="&quantity_settings["+e+"]["+$(this).attr("name")+"]="+encodeURIComponent($(this).val())}})});$.each($(".simpleimportproduct #fieldset_1_1 .form-group select").serializeArray(),function(e,f){if(f.name!=="category"){d+="&field["+f.name+"]="+encodeURIComponent(f.value)}});$.each($(".simpleimportproduct #fieldset_0 .form-group .one_category_block"),function(e){$.each($(this).find(".one_subcategory"),function(f){d+="&field_category["+e+"][]="+encodeURIComponent($(this).find("#category").val())})});d+=MpmImportCategoryLinking.addToRequestData();$.each($(".simpleimportproduct #fieldset_3_3"),function(e){var g=0;var f=0;$.each($(this).find(".form-group"),function(h){if($(this).find("select").val()!=undefined||$(this).hasClass("manually_attribute_name")){if($(this).hasClass("single_attribute")&&!$(this).hasClass("manually_attribute_name")){d+="&field_combinations["+e+"]["+$(this).find("select").attr("name")+"]["+g+"]="+encodeURIComponent($(this).find("select").val());f++;if(f==6){f=0;g++}}else{if($(this).hasClass("manually_attribute_name")){d+="&field_combinations["+e+"]["+$(this).find("input").attr("name")+"]["+g+"]="+encodeURIComponent($(this).find("input").val())}else{if($(this).hasClass("full_combination_suppliers")){$.each($(this).find(".full_combination_supplier_item"),function(i){$.each($(this).find(".form-group-sup"),function(){d+="&field_combinations["+e+"][suppliers]["+i+"]["+$(this).find("select").attr("name")+"]="+encodeURIComponent($(this).find("select").val())})})}else{if($(this).hasClass("images_combination")){$.each($(this).find(".one_image_block "),function(i){d+="&field_combinations["+e+"][images]["+i+"]="+encodeURIComponent($(this).find("select").val())})}else{d+="&field_combinations["+e+"]["+$(this).find("select").attr("name")+"]="+encodeURIComponent($(this).find("select").val())}}}}}if($(this).find("input[name=remove_combinations]").length>0){d+="&field_combinations["+e+"]["+$(this).find("input").attr("name")+"]="+encodeURIComponent($(this).find("input:checked").val())}})});if($('input[name="has_discount"]:checked').val()==true){$.each($(".simpleimportproduct #fieldset_5_5"),function(e){$.each($(this).find(".form-group"),function(f){if($(this).find("select").length>0){d+="&field_discount["+e+"]["+$(this).find("select").attr("name")+"]="+encodeURIComponent($(this).find("select").val())}if($(this).find("input").length>0){d+="&field_discount["+e+"]["+$(this).find("input").attr("name")+"]="+encodeURIComponent($(this).find("input:checked").val())}})})}$.each($(".simpleimportproduct #fieldset_7_7"),function(e){$.each($(this).find(".form-group"),function(f){if($(this).find("select").length>0){d+="&field_featured["+e+"]["+$(this).find("select").attr("name")+"]="+encodeURIComponent($(this).find("select").val())}if($(this).find("input[type=radio]").length>0){if($(this).find("input").attr("name")==undefined){return}d+="&field_featured["+e+"]["+$(this).find("input").attr("name")+"]="+encodeURIComponent($(this).find("input:checked").val())}if($(this).find("input[type=text]").length>0){if($(this).find("input").attr("name")==undefined){return}d+="&field_featured["+e+"]["+$(this).find("input").attr("name")+"]="+encodeURIComponent($(this).find("input").val())}})});$.each($(".simpleimportproduct #fieldset_13_13"),function(e){$.each($(this).find(".form-group"),function(f){if($(this).find("select").length>0){d+="&field_customization["+e+"]["+$(this).find("select").attr("name")+"]="+encodeURIComponent($(this).find("select").val())}if($(this).find("input").length>0){if($(this).find("input").attr("name")==undefined){return}d+="&field_customization["+e+"]["+$(this).find("input").attr("name")+"]="+encodeURIComponent($(this).find("input:checked").val())}})});$.each($(".simpleimportproduct #fieldset_14_14"),function(e){$.each($(this).find(".form-group"),function(f){if($(this).find("select").length>0){d+="&field_attachments["+e+"]["+$(this).find("select").attr("name")+"]="+encodeURIComponent($(this).find("select").val())}if($(this).find("input").length>0){if($(this).find("input").attr("name")==undefined){return}d+="&field_attachments["+e+"]["+$(this).find("input").attr("name")+"]="+encodeURIComponent($(this).find("input:checked").val())}})});$.each($(".simpleimportproduct #fieldset_12_12"),function(e){$.each($(this).find(".form-group"),function(f){if($(this).find("select").length>0){d+="&field_suppliers["+e+"]["+$(this).find("select").attr("name")+"]="+encodeURIComponent($(this).find("select").val())}if($(this).find("input").length>0){if($(this).find("input").attr("name")==undefined){return}d+="&field_suppliers["+e+"]["+$(this).find("input").attr("name")+"]="+encodeURIComponent($(this).find("input:checked").val())}})});$.each($(".simpleimportproduct #fieldset_6_6"),function(e){$.each($(this).find(".form-group"),function(f){if($(this).find("select").length>0){d+="&field_images["+e+"]["+$(this).find("select").attr("name")+"]="+encodeURIComponent($(this).find("select").val())}if($(this).find("input").length>0){if($(this).find("input").attr("name")==undefined){return}d+="&field_images["+e+"]["+$(this).find("input").attr("name")+"]="+encodeURIComponent($(this).find("input:checked").val())}})});if($('input[name="has_accessories"]:checked').val()==true){$.each($(".simpleimportproduct #fieldset_9_9"),function(e){$.each($(this).find(".form-group"),function(f){if($(this).find("select").length>0){d+="&field_accessories["+$(this).find("select").attr("name")+"]="+encodeURIComponent($(this).find("select").val())}if($(this).find("input").length>0){if($(this).find("input").attr("name")==undefined){return}d+="&field_accessories["+$(this).find("input").attr("name")+"]="+encodeURIComponent($(this).find("input:checked").val())}})})}$.each($(".simpleimportproduct #fieldset_11_11"),function(e){$.each($(this).find(".form-group"),function(f){if($(this).find("select").length>0){d+="&field_pack_products["+$(this).find("select").attr("name")+"]="+encodeURIComponent($(this).find("select").val())}if($(this).find("input").length>0){if($(this).find("input").attr("name")==undefined){return}d+="&field_pack_products["+$(this).find("input").attr("name")+"]="+encodeURIComponent($(this).find("input:checked").val())}})});d+="&id_shop="+c;d+="&name_save="+encodeURIComponent(a);d+="&key_settings="+b;d+="&id_shop_group="+$('input[name="id_shop_group"]').val();if($("textarea[name=notification_emails]").length>0){d+="&notification_emails="+$('textarea[name="notification_emails"]').val()}$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"save=true&ajax=true"+d+"&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_lang="+$("input[name=id_lang]").val(),dataType:"json",beforeSend:function(){$("body").append('<div class="progres_bar_ex"><div class="loading"><div></div></div></div>')},success:function(e){$(".alert-danger, .alert-success").remove();if(!e){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}if(e.error){if(e.field_key||e.field_key==0){$(".import_tab[data-tab=additional_settings]").trigger("click");$(".progres_bar_ex").remove();$(document).scrollTop(0);importError.show($(".field_settings .setting_new_field input")[e.field_key],importError.ERROR_TYPE_ERROR,e.error)}else{$(document).scrollTop(0);$(".progres_bar_ex").remove();$(".panel-heading-gomakoil").before('<div class="alert alert-danger">'+e.error+"</div>")}}else{if(e.success){$(".panel-heading-gomakoil").before('<div class="alert alert-success">'+e.success+"</div>");$(".progres_bar_ex").remove();$(document).scrollTop(0);location.href=$("#location_href").val()+"&module_tab=step_2&save="+e.count_settings}else{$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}},error:function(f){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(f.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function removeSettings(a){var b=$('input[name="id_shop"]').val();$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"remove=true&ajax=true&key="+a+"&id_shop="+b+"&id_shop_group="+$('input[name="id_shop_group"]').val()+"&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_lang="+$("input[name=id_lang]").val(),dataType:"json",beforeSend:function(){$("body").append('<div class="progres_bar_ex"><div class="loading"><div></div></div></div>')},success:function(c){$(".alert-danger, .alert-success").remove();if(c.error){$(document).scrollTop(0);$(".progres_bar_ex").remove();$(".panel-heading-gomakoil").before('<div class="alert alert-danger">'+c.error+"</div>")}else{if(c.success){$(".panel-heading-gomakoil").before('<div class="alert alert-success">'+c.success+"</div>");$(".delete_config[settings="+a+"]").parent().remove();$(document).scrollTop(0);$(".progres_bar_ex").remove()}}},error:function(c){$(".alert-danger, .alert-success").remove();$(".progres_bar_ex").remove();$(document).scrollTop(0);if(c.responseText.indexOf("AdminProductsimport")>0){$(".panel-heading-gomakoil").before('<div class="alert alert-danger">You was logged out from your admin panel, you must be logged during import process!</div>')}else{$(".panel-heading-gomakoil").before('<div class="alert alert-danger">Some error occurred please contact us!</div>')}}})}function importImages(){var a=$('input[name="id_shop"]').val();if(stopImport){return false}$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"copyImages=true&ajax=true&id_shop="+a+"&id_shop_group="+$('input[name="id_shop_group"]').val(),dataType:"json",success:function(b){if(b.success){if(b.need_copy){importImages()}}else{importImages()}},error:function(b){importImages()}})}var refreshIntervalId=false;var errorsCount=0;var stopImport=0;var startImportRunning=0;var startCopyImages=0;function importProducts(a){var b=$('input[name="id_shop"]').val();var c="";if(a==0){$(document).scrollTop(0);stopImport=0;startImportRunning=1;errorsCount=0;startCopyImages=0;returnAddProducts(b)}$.each($(".simpleimportproduct #fieldset_0 .form-group select"),function(d,e){if(e.name!=="category"&&$(this).parents(".price_settings_block").length==0&&$(this).parents(".quantity_settings_block").length==0&&$(this).parents(".field_settings_block").length==0){c+="&field["+e.name+"]="+encodeURIComponent(e.value)}});c+="&field[remove_categories]="+encodeURIComponent($("input[name='remove_categories']:checked").val());c+="&field[remove_suppliers]="+encodeURIComponent($("input[name='remove_suppliers']:checked").val());c+="&field[disable_zero_products]="+encodeURIComponent($("input[name='disable_zero_products']:checked").val());$.each($(".simpleimportproduct #fieldset_0 .from_categories input").serializeArray(),function(d,e){c+="&import_from_categories["+d+"]="+encodeURIComponent(e.value)});$.each($(".simpleimportproduct #fieldset_0 .from_suppliers input").serializeArray(),function(d,e){c+="&import_from_suppliers["+d+"]="+encodeURIComponent(e.value)});$.each($(".simpleimportproduct #fieldset_0 .from_brands input").serializeArray(),function(d,e){c+="&import_from_brands["+d+"]="+encodeURIComponent(e.value)});$.each($(".simpleimportproduct #fieldset_0 .field_settings_block"),function(d){$.each($(this).find(".form-group-field-settings select"),function(e,f){c+="&field_settings["+d+"]["+f.name+"]="+encodeURIComponent(f.value)});$.each($(this).find(".form-group-field-settings input"),function(e,f){if($(this).attr("name")){c+="&field_settings["+d+"]["+$(this).attr("name")+"]="+encodeURIComponent($(this).val())}})});$.each($(".simpleimportproduct #fieldset_0 .price_settings_block"),function(d){$.each($(this).find(".form-group-price-settings select"),function(e,f){c+="&price_settings["+d+"]["+f.name+"]="+encodeURIComponent(f.value)});$.each($(this).find(".form-group-price-settings input"),function(e,f){if($(this).attr("name")){c+="&price_settings["+d+"]["+$(this).attr("name")+"]="+encodeURIComponent($(this).val())}})});$.each($(".simpleimportproduct #fieldset_0 .quantity_settings_block"),function(d){$.each($(this).find(".form-group-quantity-settings select"),function(e,f){c+="&quantity_settings["+d+"]["+f.name+"]="+encodeURIComponent(f.value)});$.each($(this).find(".form-group-quantity-settings input"),function(e,f){if($(this).attr("name")){c+="&quantity_settings["+d+"]["+$(this).attr("name")+"]="+encodeURIComponent($(this).val())}})});$.each($(".simpleimportproduct #fieldset_1_1 .form-group select").serializeArray(),function(d,e){if(e.name!=="category"){c+="&field["+e.name+"]="+encodeURIComponent(e.value)}});$.each($(".simpleimportproduct #fieldset_0 .form-group .one_category_block"),function(d){$.each($(this).find(".one_subcategory"),function(e){c+="&field_category["+d+"][]="+encodeURIComponent($(this).find("#category").val())})});c+=MpmImportCategoryLinking.addToRequestData();$.each($(".simpleimportproduct #fieldset_3_3"),function(d){var f=0;var e=0;$.each($(this).find(".form-group"),function(g){if($(this).find("select").val()!=undefined||$(this).hasClass("manually_attribute_name")){if($(this).hasClass("single_attribute")&&!$(this).hasClass("manually_attribute_name")){c+="&field_combinations["+d+"]["+$(this).find("select").attr("name")+"]["+f+"]="+encodeURIComponent($(this).find("select").val());e++;if(e==6){e=0;f++}}else{if($(this).hasClass("manually_attribute_name")){c+="&field_combinations["+d+"]["+$(this).find("input").attr("name")+"]["+f+"]="+encodeURIComponent($(this).find("input").val())}else{if($(this).hasClass("full_combination_suppliers")){$.each($(this).find(".full_combination_supplier_item"),function(h){$.each($(this).find(".form-group-sup"),function(){c+="&field_combinations["+d+"][suppliers]["+h+"]["+$(this).find("select").attr("name")+"]="+encodeURIComponent($(this).find("select").val())})})}else{if($(this).hasClass("images_combination")){$.each($(this).find(".one_image_block "),function(h){c+="&field_combinations["+d+"][images]["+h+"]="+encodeURIComponent($(this).find("select").val())})}else{c+="&field_combinations["+d+"]["+$(this).find("select").attr("name")+"]="+encodeURIComponent($(this).find("select").val())}}}}}if($(this).find("input[name=remove_combinations]").length>0){c+="&field_combinations["+d+"]["+$(this).find("input").attr("name")+"]="+encodeURIComponent($(this).find("input:checked").val())}})});if($('input[name="has_discount"]:checked').val()==true){$.each($(".simpleimportproduct #fieldset_5_5"),function(d){$.each($(this).find(".form-group"),function(e){if($(this).find("select").length>0){c+="&field_discount["+d+"]["+$(this).find("select").attr("name")+"]="+encodeURIComponent($(this).find("select").val())}if($(this).find("input").length>0){c+="&field_discount["+d+"]["+$(this).find("input").attr("name")+"]="+encodeURIComponent($(this).find("input:checked").val())}})})}$.each($(".simpleimportproduct #fieldset_7_7"),function(d){$.each($(this).find(".form-group"),function(e){if($(this).find("select").length>0){c+="&field_featured["+d+"]["+$(this).find("select").attr("name")+"]="+encodeURIComponent($(this).find("select").val())}if($(this).find("input[type=radio]").length>0){if($(this).find("input").attr("name")==undefined){return}c+="&field_featured["+d+"]["+$(this).find("input").attr("name")+"]="+encodeURIComponent($(this).find("input:checked").val())}if($(this).find("input[type=text]").length>0){if($(this).find("input").attr("name")==undefined){return}c+="&field_featured["+d+"]["+$(this).find("input").attr("name")+"]="+encodeURIComponent($(this).find("input").val())}})});$.each($(".simpleimportproduct #fieldset_12_12"),function(d){$.each($(this).find(".form-group"),function(e){if($(this).find("select").length>0){c+="&field_suppliers["+d+"]["+$(this).find("select").attr("name")+"]="+encodeURIComponent($(this).find("select").val())}if($(this).find("input").length>0){if($(this).find("input").attr("name")==undefined){return}c+="&field_suppliers["+d+"]["+$(this).find("input").attr("name")+"]="+encodeURIComponent($(this).find("input:checked").val())}})});$.each($(".simpleimportproduct #fieldset_13_13"),function(d){$.each($(this).find(".form-group"),function(e){if($(this).find("select").length>0){c+="&field_customization["+d+"]["+$(this).find("select").attr("name")+"]="+encodeURIComponent($(this).find("select").val())}if($(this).find("input").length>0){if($(this).find("input").attr("name")==undefined){return}c+="&field_customization["+d+"]["+$(this).find("input").attr("name")+"]="+encodeURIComponent($(this).find("input:checked").val())}})});$.each($(".simpleimportproduct #fieldset_14_14"),function(d){$.each($(this).find(".form-group"),function(e){if($(this).find("select").length>0){c+="&field_attachments["+d+"]["+$(this).find("select").attr("name")+"]="+encodeURIComponent($(this).find("select").val())}if($(this).find("input").length>0){if($(this).find("input").attr("name")==undefined){return}c+="&field_attachments["+d+"]["+$(this).find("input").attr("name")+"]="+encodeURIComponent($(this).find("input:checked").val())}})});if($('input[name="has_accessories"]:checked').val()==true){$.each($(".simpleimportproduct #fieldset_9_9"),function(d){$.each($(this).find(".form-group"),function(e){if($(this).find("select").length>0){c+="&field_accessories["+$(this).find("select").attr("name")+"]="+encodeURIComponent($(this).find("select").val())}if($(this).find("input").length>0){c+="&field_accessories["+$(this).find("input").attr("name")+"]="+encodeURIComponent($(this).find("input:checked").val())}})})}$.each($(".simpleimportproduct #fieldset_6_6"),function(d){$.each($(this).find(".form-group"),function(e){if($(this).find("select").length>0){c+="&field_images["+d+"]["+$(this).find("select").attr("name")+"]="+encodeURIComponent($(this).find("select").val())}if($(this).find("input").length>0){if($(this).find("input").attr("name")==undefined){return}c+="&field_images["+d+"]["+$(this).find("input").attr("name")+"]="+encodeURIComponent($(this).find("input:checked").val())}})});$.each($(".simpleimportproduct #fieldset_11_11"),function(d){$.each($(this).find(".form-group"),function(e){if($(this).find("select").length>0){c+="&field_pack_products["+$(this).find("select").attr("name")+"]="+encodeURIComponent($(this).find("select").val())}if($(this).find("input").length>0){if($(this).find("input").attr("name")==undefined){return}c+="&field_pack_products["+$(this).find("input").attr("name")+"]="+encodeURIComponent($(this).find("input:checked").val())}})});c+="&id_shop="+b;c+="&limit="+a;c+="&id_shop_group="+$('input[name="id_shop_group"]').val();$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"import=true&ajax=true"+c+"&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_lang="+$("input[name=id_lang]").val(),dataType:"json",beforeSend:function(){if($(".import_progress").is(":hidden")){$(".import_progress").show();$("#configuration_form").hide();$(".productTabs").hide()}},complete:function(){},success:function(d){if(stopImport){returnAddProducts($("input[name=id_shop]").val(),0,2);return true}if(!d){if(a==0){returnAddProducts(b,1,1);return true}if(a!=0&&errorsCount<10){importProducts(a);errorsCount++}else{returnAddProducts(b,1,1)}}if(a==0){startImportRunning=0}if(d.limit){importProducts(d.limit)}if(d.error){returnAddProducts(b,d.error,1)}},error:function(d){if(stopImport){returnAddProducts($("input[name=id_shop]").val(),0,2);return true}if(a!=0&&errorsCount<10){importProducts(a);errorsCount++}else{returnAddProducts(b,1,1)}}})}function generateThumbnails(){var a=$('input[name="id_shop"]').val();if(stopImport){return false}$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"generateThumbnails=true&ajax=true&id_shop="+a+"&id_shop_group="+$('input[name="id_shop_group"]').val(),dataType:"json",success:function(b){if(b.success){if(b.generate){generateThumbnails()}}else{generateThumbnails()}},error:function(b){generateThumbnails()}})}function processImages(){$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"processImages=true&ajax=true&id_shop="+$('input[name="id_shop"]').val()+"&id_shop_group="+$('input[name="id_shop_group"]').val()+"&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_lang="+$("input[name=id_lang]").val(),dataType:"json",success:function(a){}})}function returnAddProducts(c,a,b){if(!a){a=0}else{stopImport=1}if(!b){b=0;if(stopImport){return true}}$.ajax({url:"../modules/simpleimportproduct/send.php",type:"post",data:"returnCount=true&ajax=true&start_import_running="+startImportRunning+"&id_shop="+c+"&error="+a+"&finish="+b+"&id_shop_group="+$('input[name="id_shop_group"]').val()+"&token="+$("input[name=products_import_token]").val()+"&controller=AdminProductsimport&action=send&id_lang="+$("input[name=id_lang]").val(),dataType:"json",success:function(d){if(!startCopyImages&&d.need_copy_image){processImages();startCopyImages=1}if(d.progress){$(".import_progress").html(d.progress)}if(!d){refreshIntervalId=setTimeout(function(){returnAddProducts(c,a,b)},3000)}if(b){clearTimeout(refreshIntervalId);return true}if(d.import_finished){stopImport=1}if(d.import_running||startImportRunning){refreshIntervalId=setTimeout(function(){returnAddProducts(c,a,b)},3000)}},error:function(d){refreshIntervalId=setTimeout(function(){returnAddProducts(c,a,b)},3000)}})}function changeDiscount(){var a=$("#combinations_import_type").val();if(a=="separated_field_value"){$("#specific_prices_for option").each(function(){if($(this).val()!=0){$(this).remove()}})}else{var b=$(".simpleimportproduct #fieldset_3_3").length;$(".simpleimportproduct #fieldset_5_5").each(function(){var e=$(this).find("#specific_prices_for option").length;var g=$(this).find("#specific_prices_for");if(b>=e){var f=(b+1)-e;for(var d=e;d<(e+f);d++){$(g).append($("<option>",{value:d,text:$("#label_combinations").val()+" "+d}))}}else{var c=e-(b+1);for(var d=(e-c);d<(e);d++){$(this).find("#specific_prices_for option[value='"+d+"']").remove()}}})}}var MpmImportCategoryLinking={toggle_switch:"input[name='show_category_linking_block']",container:"#mpm_sip_category_linking_container",linked_items_container:"#mpm_sip_category_linking_block_main_content",add_btn:"#mpm_sip_clb_add",delete_btn:".mpm-sip-clb-delete",linked_item_row:".mpm-sip-clb-row",file_categories_select:".mpm-sip-clb-file-category",shop_categories_select:".mpm-sip-clb-shop-category",show:function(){$(this.container).slideDown()},hide:function(){$(this.container).slideUp()},toggleVisibility:function(){if(this.isActive()==1){this.show()}else{this.hide()}},isActive:function(){return $(this.toggle_switch+":checked").val()},init:function(){this.toggleVisibility();$(this.linked_item_row).find("select").chosen()},addNew:function(){$.ajax({type:"POST",url:"index.php",dataType:"json",data:{ajax:true,token:$("input[name=products_import_token]").val(),controller:"AdminProductsimport",action:"getNewCategoryLinking",last_id:MpmImportCategoryLinking.getNumberOfItems()},success:function(a){if(a.status=="success"){$(MpmImportCategoryLinking.linked_item_row).last().after(a.tpl)}else{alert("Can not retrieve new category linking template!")}},error:function(){alert("AJAX request has failed!")}})},remove:function(a){if(this.getNumberOfItems()==1){$("label[for='show_category_linking_block_off']").click();this.hide();$(this.file_categories_select).val("")}else{a.parents(this.linked_item_row).remove()}},getNumberOfItems:function(){return $(this.linked_item_row).length},addToRequestData:function(){var b="&category_linking_active="+MpmImportCategoryLinking.isActive();if(MpmImportCategoryLinking.isActive()==true){var a={};$(MpmImportCategoryLinking.linked_item_row).each(function(){var e=$(this).find(MpmImportCategoryLinking.file_categories_select).val();e=encodeURIComponent(e);var d="mpm_sip_shop_category_"+$(this).data("row-number");var c=$(this).find(".tree input[name='"+d+"']:checked").val();var g=$(this).find(".tree input[name='"+d+"']:checked").siblings("label").text();var h=$(this).find(".tree input[name='"+d+"']:checked").closest(".tree").siblings(".tree-folder-name").find("input").val();var f=e.length>0&&c>0&&g.length>0;if(f){a[e]={id:c,name:g,parent:h}}});b+="&category_linking="+JSON.stringify(a)}else{b+="&category_linking=[]"}return b}};